<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Kublay's Mods4Versus</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Custom Titlebar -->
    <div id="titlebar">
        <span id="titlebar-title">KUBLAY'S MODS4VERSUS</span>
        <div id="titlebar-buttons">
            <button class="titlebar-btn" id="btn-minimize" title="Minimizar">
                <svg viewBox="0 0 12 12" fill="currentColor">
                    <rect y="5" width="12" height="2" />
                </svg>
            </button>
            <button class="titlebar-btn" id="btn-maximize" title="Maximizar">
                <svg viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                    <rect x="1" y="1" width="10" height="10" />
                </svg>
            </button>
            <button class="titlebar-btn close" id="btn-close" title="Cerrar">
                <svg viewBox="0 0 12 12" fill="currentColor">
                    <path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.5" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div id="main-content">
        <div id="header-container">
            <div class="logo-stack">
                <div class="logo-top">KUBLAY'S</div>
                <div class="logo-main">MODS4VERSUS</div>
            </div>
            <span class="subtitle">// MODS PARA EL LEFT</span>
            <button class="btn-donate" id="btn-donate" title="Apoyar">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M2 21V19H4V12C4 10.9 4.275 9.875 4.825 8.925C5.375 7.975 6.15 7.25 7.15 6.75L8 10H11.5L13 5.5C13.3333 4.66667 13.4167 3.8 13.25 2.9C13.0833 2 12.6833 1.2 12.05 0.5C12.75 0.45 13.4167 0.554167 14.05 0.8125C14.6833 1.07083 15.2333 1.45 15.7 1.95C16.1667 2.45 16.5167 3.03333 16.75 3.7C16.9833 4.36667 17.05 5.05 16.95 5.75L16.5 9H20C20.55 9 21.0208 9.19583 21.4125 9.5875C21.8042 9.97917 22 10.45 22 11V12.5L20 19H7V12L5.55 7.9C5.18333 8.16667 4.89583 8.5 4.6875 8.9C4.47917 9.3 4.36667 9.73333 4.35 10.2V19H6V21H2Z" />
                </svg>
                APOYAR
            </button>
            <button class="btn-contact" id="btn-contact" title="Contacto">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                </svg>
                CONTACTO
            </button>
        </div>

        <div id="grid-container">
            <div style="text-align:center; padding:50px; color:#555;" id="scan-msg">Escaneando Workshop...</div>
        </div>

        <div id="footer">
            <div id="status">Esperando órdenes...</div>
            <button id="btn-fusion">FUSIONAR</button>
        </div>
    </div>

    <div class="version-badge">v1.2.1</div>

    <!-- Audio Elements -->
    <audio id="sound-click" src="menu_click01.wav" preload="auto"></audio>
    <audio id="sound-complete" src="menu_enter05.wav" preload="auto"></audio>

    <!-- System Modal -->
    <div id="modal-overlay">
        <div id="modal-box">
            <div id="modal-title">SISTEMA</div>
            <div id="modal-msg">Mensaje del sistema...</div>
            <button id="modal-btn">ACEPTAR</button>
        </div>
    </div>

    <!-- Loading Modal -->
    <div id="loading-overlay">
        <div id="loading-box">
            <div id="loading-title">FUSIONANDO MODS</div>
            <div id="loading-percent">Procesando...</div>
            <div id="loading-progress-container">
                <div id="loading-progress-bar"></div>
            </div>
            <div id="loading-tip">
                <span id="loading-tip-label">CONSEJOS PARA EVITAR EL F1:</span>
                <span id="loading-tip-text">Cargando...</span>
            </div>
        </div>
    </div>

    <!-- Donate Dialog -->
    <dialog id="donate-dialog">
        <div class="dialog-title">☕ APOYAR EL PROYECTO</div>
        <img id="yape-qr-img" src="" alt="QR Yape" class="qr-image" style="display:none;">
        <div class="yape-text">Apoyar con Yape</div>
        <button class="btn-close-dialog" id="btn-close-dialog">CERRAR</button>
        <script>
            // Fetch embedded QR securely
            const donateDialog = document.getElementById('donate-dialog');
            // Observer to load image only when dialog is opened (optional optimization, but good practice)
            // Or just load it on startup:
            window.addEventListener('DOMContentLoaded', () => {
                window.__TAURI__.core.invoke('get_donation_qr')
                    .then(dataUri => {
                        const img = document.getElementById('yape-qr-img');
                        img.src = dataUri;
                        img.style.display = 'block';
                    })
                    .catch(err => console.error('Failed to load secure QR:', err));
            });
        </script>
    </dialog>

    <!-- Contact Dialog -->
    <dialog id="contact-dialog">
        <div class="dialog-title">CONTACTO</div>
        <div class="contact-info">
            <p>Business Contact:</p>
            <a href="mailto:kublay.tayro@gmail.com" class="contact-email">kublay.tayro@gmail.com</a>
        </div>
        <button class="btn-close-dialog" id="btn-close-contact">CERRAR</button>
    </dialog>

    <!-- Update Available Dialog -->
    <div id="update-overlay">
        <div id="update-box">
            <div id="update-title">¡ACTUALIZACIÓN DISPONIBLE!</div>

            <!-- Question Phase -->
            <div id="update-question">
                <div id="update-version-text">Nueva versión: <span id="update-version">--</span></div>
                <div id="update-notes"></div>
                <div id="update-buttons">
                    <button id="btn-update-now">ACTUALIZAR AHORA</button>
                    <button id="btn-update-later">MÁS TARDE</button>
                </div>
            </div>

            <!-- Download Phase (hidden initially) -->
            <div id="update-download" style="display:none;">
                <div id="update-status">Descargando actualización...</div>
                <div id="update-progress-container">
                    <div id="update-progress-bar"></div>
                </div>
                <div id="update-percent">0%</div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>